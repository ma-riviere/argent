<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Creating AI Agents in R • argent</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Creating AI Agents in R">
<meta name="description" content="A unified R6-based interface for interacting with Large Language Models (LLMs) from multiple providers, specialized for creating AI agents with tool calling, multimodal inputs, and structured outputs.">
<meta property="og:description" content="A unified R6-based interface for interacting with Large Language Models (LLMs) from multiple providers, specialized for creating AI agents with tool calling, multimodal inputs, and structured outputs.">
<meta property="og:image" content="https://ma-riviere.github.io/argent/reference/figures/logo.png">
<meta property="og:image:alt" content="Creating AI Agents in R">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@mariviere1">
<meta name="twitter:site" content="@mariviere1">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">argent</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/argent.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-providers" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Providers</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-providers">
<li><a class="dropdown-item" href="articles/google-gemini.html">Google Gemini</a></li>
    <li><a class="dropdown-item" href="articles/anthropic.html">Anthropic</a></li>
    <li><a class="dropdown-item" href="articles/openrouter.html">OpenRouter</a></li>
    <li><a class="dropdown-item" href="articles/local-llm.html">Local LLM</a></li>
    <li><a class="dropdown-item" href="articles/other-providers.html">Other Providers</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>OpenAI</h6></li>
    <li><a class="dropdown-item" href="articles/openai-responses.html">Responses API</a></li>
    <li><a class="dropdown-item" href="articles/openai-completions.html">Chat Completions API</a></li>
    <li><a class="dropdown-item" href="articles/openai-assistants.html">Assistants API</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-advanced-use" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Advanced Use</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-advanced-use">
<li><a class="dropdown-item" href="articles/advanced-rag.html">RAG with `ragnar`</a></li>
    <li><a class="dropdown-item" href="articles/advanced-mcp.html">Using MCP Servers</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ma-riviere/argent/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="argent-">argent 
<a class="anchor" aria-label="anchor" href="#argent-"></a>
</h1>
</div>
<!-- badges: start -->

<p><strong>argent</strong> provides a unified R6-based interface for interacting with Large Language Models (LLMs) from multiple providers, specialized for creating AI agents with tool calling, multimodal inputs, and structured outputs.</p>
<blockquote>
<p><strong>Important</strong></p>
<p>Why <strong>questioning</strong> ? In most cases, you’d be better off using <a href="https://github.com/tidyverse/ellmer" class="external-link">ellmer</a>.</p>
<p>I started working on this back in 2023 when none of the existing LLM packages supported tool calling or structured outputs, but I never took the time to put everything into a proper package until now. However, there are now several similar packages, including <a href="https://github.com/tidyverse/ellmer" class="external-link">ellmer</a> by the Tidyverse team.</p>
<p>I’m putting <code>argent</code> out there in case it supports some edge cases that other packages don’t, and because I didn’t want to let all that work go to waste. But I will be progressively migrating my projects to <code>ellmer</code>, so I’m not sure how long I’ll maintain <code>argent</code>.</p>
</blockquote>
<div class="section level2">
<h2 id="in-a-nutshell">In a Nutshell<a class="anchor" aria-label="anchor" href="#in-a-nutshell"></a>
</h2>
<p><code>argent</code> provides a unified interface to build AI agents with conversation history management, local function &amp; MCP tools, server-side tools, multimodal inputs, and universal structured outputs.</p>
<p>It supports most <strong>server-side tools</strong> (code execution, web search, file search, etc.) and allows to easily define <strong>client-side tools</strong> using plumber2-style annotations within R functions. It allows sending <strong>multimodal inputs</strong> (i.e. mixing text, images, PDFs, data files, URLs, remote files, and R objects) in a single request, and it supports <strong>structured outputs</strong> for <strong><em>any</em></strong> model supporting tool calling, whatever other tools/functions are used.</p>
</div>
<div class="section level2">
<h2 id="supported-providers--features">Supported Providers &amp; Features<a class="anchor" aria-label="anchor" href="#supported-providers--features"></a>
</h2>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 18%">
<col style="width: 11%">
<col style="width: 10%">
</colgroup>
<thead><tr>
<th>
Feature
</th>
<th>
Google
</th>
<th>
Anthropic
</th>
<th>
OpenAI Chat
</th>
<th>
OpenAI Responses
</th>
<th>
OpenAI Assistants
</th>
<th>
OpenRouter
</th>
<th>
Local LLM
</th>
</tr></thead>
<tbody>
<tr>
<td>
<strong>Function &amp; MCP tools</strong>
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Depends on model capabilities. Not all models support tool calling.
&lt;/p&gt;"><sup>1</sup></a>
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Depends on model capabilities. Not all models support tool calling.
&lt;/p&gt;"><sup>2</sup></a>
</td>
</tr>
<tr>
<td>
<strong>Structured outputs</strong>
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Works on any model supporting tool calling. Works even if you provide other tools, client-side or server-side, to the model at the same time.
&lt;/p&gt;"><sup>3</sup></a>
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Works on any model supporting tool calling. Works even if you provide other tools, client-side or server-side, to the model at the same time.
&lt;/p&gt;"><sup>4</sup></a>
</td>
</tr>
<tr>
<td>
<strong>Multimodal inputs</strong>
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Depends on model capabilities
&lt;/p&gt;"><sup>5</sup></a>
</td>
</tr>
<tr>
<td>
<strong>Server-side tools</strong>
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
google_search, google_maps, url_context, code_execution, file_search
&lt;/p&gt;"><sup>6</sup></a>
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
web_search, web_fetch, code_execution
&lt;/p&gt;"><sup>7</sup></a>
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Only web search via specialized models (gpt-4o-mini-search-preview)
&lt;/p&gt;"><sup>8</sup></a>
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
web_search, file_search, code_interpreter
&lt;/p&gt;"><sup>9</sup></a>
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
file_search, code_interpreter
&lt;/p&gt;"><sup>10</sup></a>
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
web_search available on some models
&lt;/p&gt;"><sup>11</sup></a>
</td>
<td>
❌
</td>
</tr>
<tr>
<td>
<strong>Code execution</strong>
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
❌
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
❌
</td>
<td>
❌
</td>
</tr>
<tr>
<td>
<strong>File upload</strong>
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
❌
</td>
<td>
❌
</td>
</tr>
<tr>
<td>
<strong>Server-side RAG</strong>
</td>
<td>
✅
</td>
<td>
❌
</td>
<td>
❌
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
❌
</td>
<td>
❌
</td>
</tr>
<tr>
<td>
<strong>Reasoning / thinking</strong>
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
⚠️
</td>
<td>
✅
</td>
<td>
❌
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Depends on model, and on server configuration (e.g., &lt;code&gt;–reasoning-format&lt;/code&gt; for llama.cpp)
&lt;/p&gt;"><sup>12</sup></a>
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Depends on model, and on server configuration (e.g., &lt;code&gt;–reasoning-format&lt;/code&gt; for llama.cpp)
&lt;/p&gt;"><sup>13</sup></a>
</td>
</tr>
<tr>
<td>
<strong>Server-side state</strong>
</td>
<td>
❌
</td>
<td>
❌
</td>
<td>
❌
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Optional via &lt;code&gt;previous_response_id&lt;/code&gt; (30-day retention)
&lt;/p&gt;"><sup>14</sup></a>
</td>
<td>
✅
</td>
<td>
❌
</td>
<td>
❌
</td>
</tr>
<tr>
<td>
<strong>Prompt caching</strong>
</td>
<td>
✅
</td>
<td>
✅
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Automatic prompt caching by OpenAI
&lt;/p&gt;"><sup>15</sup></a>
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Automatic prompt caching by OpenAI
&lt;/p&gt;"><sup>16</sup></a>
</td>
<td>
✅<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Automatic prompt caching by OpenAI
&lt;/p&gt;"><sup>17</sup></a>
</td>
<td>
⚠️<a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Depends on the underlying provider being used
&lt;/p&gt;"><sup>18</sup></a>
</td>
<td>
❌
</td>
</tr>
<tr>
<td>
<strong>Status</strong>
</td>
<td>
Active
</td>
<td>
Active
</td>
<td>
Active
</td>
<td>
Active
</td>
<td>
<strong>Deprecated</strong><a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;
Shuts down August 26, 2026. Use Responses API instead.
&lt;/p&gt;"><sup>19</sup></a>
</td>
<td>
Active
</td>
<td>
Active
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ma-riviere/argent"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>Set the API keys for the providers you want to use in your <code>.Renviron</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GEMINI_API_KEY</span><span class="op">=</span><span class="st">"your-google-gemini-key"</span></span>
<span><span class="va">ANTHROPIC_API_KEY</span><span class="op">=</span><span class="st">"your-anthropic-key"</span></span>
<span><span class="va">OPENAI_API_KEY</span><span class="op">=</span><span class="st">"your-openai-key"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>Here is a quick example using Google Gemini:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gemini</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/Google.html">Google</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GEMINI_API_KEY"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>You can customize the rate limit when initializing with the <code>rate_limit</code> parameter, and the default model with the <code>default_model</code> parameter (‘gemini-2.5-flash’ for Google).</p>
<div class="section level3">
<h3 id="basic-completion">Basic Completion<a class="anchor" aria-label="anchor" href="#basic-completion"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gemini</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span></span>
<span>    <span class="st">"What is the R programming language? Answer in two sentences."</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"gemini-2.5-flash"</span> <span class="co"># Not necessary, it's the default model for Google</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><code>argent</code> will maintain a conversation history in the provider object, meaning that when using <code>$chat()</code> a second time, the model will have access to the previous exchanges:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gemini</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span><span class="st">"Tell me more about its statistical modeling capabilities."</span><span class="op">)</span></span></code></pre></div>
<p>The chat history can be visualized by printing the provider object:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">gemini</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>── [ &lt;Google&gt; turns: 4 | Current context: 419 | Cumulated tokens: 676 ] ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>── user [159 / 257] ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>What is the R programming language? Answer in two sentences.</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>── System ──</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>You are a helpful AI assistant. Use your knowledge, the files you have access to, and the tools at your disposal to answer the user's query. You can use your tools multiple times, but use them sparingly. Make parallel tool calls if relevant to the user's query. Answer the user's query as soon as you have the information necessary to answer. Self-reflect and double-check your answer before responding. If you don't know the answer even after using your tools, say 'I don't know'. If you do not have all the information necessary to use a provided tool, use NA for required arguments. Today's date is 2025-11-15</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>── assistant [257 / 257] ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>R is a programming language and free software environment primarily used for statistical computing and graphics. It provides a wide variety of statistical (linear and nonlinear modeling, classical statistical tests, time-series analysis, classification, clustering, etc.) and graphical techniques, and is highly extensible.</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>── user [224 / 676] ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>Tell me more about its statistical modeling capabilities.</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>── System ──</span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a>You are a helpful AI assistant. Use your knowledge, the files you have access to, and the tools at your disposal to answer the user's query. You can use your tools multiple times, but use them sparingly. Make parallel tool calls if relevant to the user's query. Answer the user's query as soon as you have the information necessary to answer. Self-reflect and double-check your answer before responding. If you don't know the answer even after using your tools, say 'I don't know'. If you do not have all the information necessary to use a provided tool, use NA for required arguments. Today's date is 2025-11-15</span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a>── assistant [419 / 676] ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a>R offers extensive statistical modeling capabilities, encompassing a broad range of techniques. It supports linear and generalized linear models (GLMs) for various response types, as well as nonlinear regression. Users can perform classical statistical tests like t-tests, ANOVA, and chi-squared tests. Furthermore, R is widely used for time-series analysis, including ARIMA models and state-space models, classification algorithms such as logistic regression, decision trees, and support vector machines, and clustering methods like k-means and hierarchical clustering. Its package ecosystem continuously expands these capabilities with cutting-edge statistical methodologies.</span></code></pre></div>
<blockquote>
<p><strong>Note</strong></p>
<p>You can also check the JSON files containing the chat history that are created automatically in the <code>data/history/{provider}/</code> directory (default).</p>
</blockquote>
<p>The chat history can be reset with <code>reset_history()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gemini</span><span class="op">$</span><span class="fu">reset_history</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tool-calling--structured-output">Tool Calling + Structured Output<a class="anchor" aria-label="anchor" href="#tool-calling--structured-output"></a>
</h3>
<p>First, let’s define a mock function for the LLM:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_user_info</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">user_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co">#' @description Provides information about the user, like their favorite programming language</span></span>
<span>    <span class="co">#' @param user_name:string* The name of the user</span></span>
<span>    </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span></span>
<span>        <span class="va">user_name</span>,</span>
<span>        <span class="st">"Marc"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>favorite_language <span class="op">=</span> <span class="st">"R"</span>, favorite_framework <span class="op">=</span> <span class="st">"Shiny"</span><span class="op">)</span>,</span>
<span>        <span class="st">"Alice"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>favorite_language <span class="op">=</span> <span class="st">"Python"</span>, favorite_framework <span class="op">=</span> <span class="st">"Flask"</span><span class="op">)</span>,</span>
<span>        <span class="st">"Bob"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>favorite_language <span class="op">=</span> <span class="st">"JavaScript"</span>, favorite_framework <span class="op">=</span> <span class="st">"React"</span><span class="op">)</span>,</span>
<span>        .default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>favorite_language <span class="op">=</span> <span class="st">"unknown"</span>, favorite_framework <span class="op">=</span> <span class="st">"unknown"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We can then call <code><a href="reference/tool_definitions.html">as_tool()</a></code> on the function to convert it to a tool using the annotations added inside the function’s body (plumber2-style annotations):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/tool_definitions.html">as_tool</a></span><span class="op">(</span><span class="va">get_user_info</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> get_user_info</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> Provides information about the user, like their favorite programming</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="at">  language</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="fu">args_schema</span><span class="kw">:</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> object</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="at">  </span><span class="fu">properties</span><span class="kw">:</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="at">    </span><span class="fu">user_name</span><span class="kw">:</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> string</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="at">      </span><span class="fu">description</span><span class="kw">:</span><span class="at"> The name of the user</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="at">  </span><span class="fu">required</span><span class="kw">:</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> user_name</span></span></code></pre></div>
<p>Then, let’s define the schema for the structured output using <code><a href="reference/tool_definitions.html">schema()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">user_info_schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tool_definitions.html">schema</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"user_info"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Information about the user"</span>,</span>
<span>    user_name <span class="op">=</span> <span class="st">"string* The name of the user"</span>,</span>
<span>    favorite_language <span class="op">=</span> <span class="st">"string* The user's favorite programming language"</span>,</span>
<span>    favorite_framework <span class="op">=</span> <span class="st">"string* The user's favorite framework"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> user_info</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> Information about the user</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">strict</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="fu">args_schema</span><span class="kw">:</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> object</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="at">  </span><span class="fu">properties</span><span class="kw">:</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="at">    </span><span class="fu">user_name</span><span class="kw">:</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> string</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="at">      </span><span class="fu">description</span><span class="kw">:</span><span class="at"> The name of the user</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="at">    </span><span class="fu">favorite_language</span><span class="kw">:</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> string</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="at">      </span><span class="fu">description</span><span class="kw">:</span><span class="at"> The user's favorite programming language</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="at">    </span><span class="fu">favorite_framework</span><span class="kw">:</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> string</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="at">      </span><span class="fu">description</span><span class="kw">:</span><span class="at"> The user's favorite framework</span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="at">  </span><span class="fu">required</span><span class="kw">:</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> user_name</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> favorite_language</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> favorite_framework</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="at">  </span><span class="fu">additionalProperties</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span></code></pre></div>
<p>Run the agent:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gemini</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span></span>
<span>    <span class="st">"The user's name is Marc. Give me the information about the user."</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"gemini-2.5-flash"</span>,</span>
<span>    thinking_budget <span class="op">=</span> <span class="fl">512</span>,</span>
<span>    include_thoughts <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># Google-specific parameter</span></span>
<span>    tools <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="reference/tool_definitions.html">as_tool</a></span><span class="op">(</span><span class="va">get_user_info</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    output_schema <span class="op">=</span> <span class="va">user_info_schema</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>$user_name</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>[1] "Marc"</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>$favorite_language</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>[1] "R"</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>$favorite_framework</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>[1] "Shiny"</span></code></pre></div>
<p>The model will use the tools provided repeatedly until it has enough information to answer the question, and return structured JSON output.</p>
<blockquote>
<p><strong>Tip</strong></p>
<p>By default, <code>argent</code> will print the tool calls the model makes in the console:</p>
<p>ℹ [Google] Calling: get_user_info(user_name = “Marc”)</p>
</blockquote>
<p>To see more, we can print the provider object with <code>show_tools = TRUE</code> to show to tool definitions, calls, and results:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">gemini</span>, show_tools <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>── [ &lt;Google&gt; turns: 4 | Current context: 496 | Cumulated tokens: 786 ] ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>── user [216 / 290] ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>The user's name is Marc. Give me the information about the user.</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>── System ──</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>You are a helpful AI assistant. Use your knowledge, the files you have access to, and the tools at your disposal to answer the user's query. You can use your tools multiple times, but use them sparingly. Make parallel tool calls if relevant to the user's query. Answer the user's query as soon as you have the information necessary to answer. Self-reflect and double-check your answer before responding. If you don't know the answer even after using your tools, say 'I don't know'. If you do not have all the information necessary to use a provided tool, use NA for required arguments. Today's date is 2025-11-18</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>── Tool Definitions ──</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>• get_user_info(user_name): Provides information about the user, like their favorite programming language</span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a>── assistant [290 / 290] ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a>── Thinking ──</span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a>**Getting the Goods on Marc**</span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a>Okay, so I see a user asking for information about "Marc". Naturally, my mind jumps to the `get_user_info` tool - that's *exactly* what this thing is designed for! Seems straightforward enough. The tool needs a `user_name` argument, which, thankfully, the user has explicitly provided. So, my action item is clear: I need to call the `get_user_info` tool and set `user_name` to 'Marc'. Simple as that. Let's get this done.</span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a>── Tool Calls ──</span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a>• get_user_info(user_name = "Marc")</span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a>── tool [420 / 786] ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>• Result from get_user_info:</span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a>name: get_user_info</span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a>arguments:</span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a>  user_name: Marc</span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a>result:</span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a>  favorite_language: R</span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a>  favorite_framework: Shiny</span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a></span>
<span id="cb17-40"><a href="#cb17-40" tabindex="-1"></a></span>
<span id="cb17-41"><a href="#cb17-41" tabindex="-1"></a>── assistant [496 / 786] ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb17-42"><a href="#cb17-42" tabindex="-1"></a></span>
<span id="cb17-43"><a href="#cb17-43" tabindex="-1"></a>── Thinking ──</span>
<span id="cb17-44"><a href="#cb17-44" tabindex="-1"></a></span>
<span id="cb17-45"><a href="#cb17-45" tabindex="-1"></a>**Delivering on the Marc Inquiry**</span>
<span id="cb17-46"><a href="#cb17-46" tabindex="-1"></a></span>
<span id="cb17-47"><a href="#cb17-47" tabindex="-1"></a>Okay, the user needed some quick intel on Marc. Time to leverage the tools. Let's see...I fired up the `get_user_info` tool and plugged in "Marc" as the `user_name`. Alright, the tool spat back his favorite programming language as "R" - interesting, I know a few folks that are passionate about that. And his favorite framework is "Shiny". Now I have the goods! I can go ahead and package this up for the user. Nothing too groundbreaking, but hopefully, it's exactly what they were looking for.</span>
<span id="cb17-48"><a href="#cb17-48" tabindex="-1"></a></span>
<span id="cb17-49"><a href="#cb17-49" tabindex="-1"></a></span>
<span id="cb17-50"><a href="#cb17-50" tabindex="-1"></a>Marc's favorite programming language is R and his favorite framework is Shiny.</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="server-side-tools">Server-side Tools<a class="anchor" aria-label="anchor" href="#server-side-tools"></a>
</h3>
<p>Providers like Google, Anthropic, and OpenAI have server-side tools. Those are tools you can call without having to define them yourself. They will be run on the provider’s server.</p>
<p>For example, Google Gemini has a server-side <code>google_search</code> which combines searching &amp; fetching web pages:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gemini</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span></span>
<span>    <span class="st">"When was the first release of the R 'ellmer' package on GitHub?"</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"gemini-2.5-pro"</span>,</span>
<span>    tools <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"google_search"</span><span class="op">)</span>,</span>
<span>    thinking_budget <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, <span class="co"># Unlimited thinking budget</span></span>
<span>    include_thoughts <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># Google-specific parameter</span></span>
<span>    output_schema <span class="op">=</span> <span class="fu"><a href="reference/tool_definitions.html">schema</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"package_info"</span>,</span>
<span>        description <span class="op">=</span> <span class="st">"Information about an R package release"</span>,</span>
<span>        release_version <span class="op">=</span> <span class="st">"string* The release version of the package"</span>,</span>
<span>        release_date <span class="op">=</span> <span class="st">"string* The release date of the `release_version`"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>$release_version</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>[1] "0.1.1"</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>$release_date</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>[1] "2025-02-25"</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multimodal-input">Multimodal Input<a class="anchor" aria-label="anchor" href="#multimodal-input"></a>
</h3>
<p>All providers support multimodal inputs (to some degree). You can pass text, images, PDFs, data files, URLs, remote files, and R objects to the model in a single request.</p>
<div class="section level4">
<h4 id="passing-files-or-urls">Passing Files or URLs<a class="anchor" aria-label="anchor" href="#passing-files-or-urls"></a>
</h4>
<p>Example with an URL to a PDF file:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bsg04_cast_image_url</span> <span class="op">&lt;-</span> <span class="st">"https://upload.wikimedia.org/wikipedia/en/1/1a/Battlestar_Galactica_%282004%29_cast.jpg"</span></span>
<span></span>
<span><span class="va">gemini</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span></span>
<span>    <span class="st">"Who are the characters in this image, and what show is it from?"</span>,</span>
<span>    <span class="va">bsg04_cast_image_url</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"gemini-2.5-flash"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>This image features the cast of **Battlestar Galactica (2004 TV series)**.</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>The characters shown are:</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>*   **Edward James Olmos** as Admiral William Adama</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>*   **Mary McDonnell** as President Laura Roslin</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>*   **Jamie Bamber** as Captain Lee "Apollo" Adama</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>*   **Katee Sackhoff** as Captain Kara "Starbuck" Thrace</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>*   **Tricia Helfer** as Number Six</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>*   **James Callis** as Dr. Gaius Baltar</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>*   **Grace Park** as Lieutenant Sharon "Boomer" Valerii / Number Eight</span></code></pre></div>
<p><em>So say we all!</em></p>
<blockquote>
<p><strong>Note</strong></p>
<p>Here, the URL was automatically detected, downloaded in a temporary file, and converted to base64, before being passed to the model.</p>
<p>Other providers may have different behavior. For example, the image or PDF’s URL will be passed as-is to Anthropic’s API.</p>
<p>Helper functions like <code><a href="reference/content_converters.html">as_text_content()</a></code> are available to force some behaviors (like extracting the contents of the PDF instead of passing base64).</p>
</blockquote>
<blockquote>
<p><strong>Tip</strong></p>
<p>We can also pass any R object to <code>chat()</code> as is. They will be captured automatically and converted to JSON (or text if JSON conversion fails), with some added information like the name of the object and its classes.</p>
</blockquote>
</div>
<div class="section level4">
<h4 id="passing-uploaded-files">Passing Uploaded Files<a class="anchor" aria-label="anchor" href="#passing-uploaded-files"></a>
</h4>
<p>Finally, major providers support uploading files to their servers, and passing them as references to the model, to use them in the conversation, either on their own, or as part of a vector store / RAG system (see <a href="./articles/google-gemini.html#server-side-rag">server-side RAG</a>).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_metadata</span> <span class="op">&lt;-</span> <span class="va">gemini</span><span class="op">$</span><span class="fu">upload_file</span><span class="op">(</span><span class="st">"https://ma-riviere.com/res/cv.pdf"</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ [Google] File uploaded: files/7xulp36j9jq1</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multipart_prompt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"What is my favorite programming language?"</span>,</span>
<span>    <span class="fu"><a href="reference/content_converters.html">as_file_content</a></span><span class="op">(</span><span class="va">file_metadata</span><span class="op">$</span><span class="va">name</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">gemini</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">multipart_prompt</span>, model <span class="op">=</span> <span class="st">"gemini-2.5-flash"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>Based on your resume, your favorite programming language appears to be **R**.</span></code></pre></div>
<p><em>Damn right!</em></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gemini</span><span class="op">$</span><span class="fu">delete_file</span><span class="op">(</span><span class="va">file_metadata</span><span class="op">$</span><span class="va">name</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ [Google] File deleted: files/7xulp36j9jq1</span></span></code></pre></div>
<blockquote>
<p><strong>Note</strong></p>
<p>Here, using <code><a href="reference/content_converters.html">as_file_content()</a></code> signals to the model that this is a remote file reference, rather than just some text content.</p>
</blockquote>
<blockquote>
<p><strong>Tip</strong></p>
<p>You can use <code>$list_files()</code> to list all uploaded files and their metadata.</p>
</blockquote>
</div>
</div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<div class="section level3">
<h3 id="provider-guides">Provider Guides<a class="anchor" aria-label="anchor" href="#provider-guides"></a>
</h3>
<p>Detailed guides for each provider:</p>
<ul>
<li><a href="https://ma-riviere.github.io/argent/articles/google-gemini.html">Google Gemini</a></li>
<li><a href="https://ma-riviere.github.io/argent/articles/anthropic.html">Anthropic Claude</a></li>
<li><a href="https://ma-riviere.github.io/argent/articles/openrouter.html">OpenRouter</a></li>
<li><a href="https://ma-riviere.github.io/argent/articles/local-llm.html">Local LLMs</a></li>
</ul>
<div class="section level4">
<h4 id="openai-apis">OpenAI APIs<a class="anchor" aria-label="anchor" href="#openai-apis"></a>
</h4>
<p>Guides for OpenAI’s three different APIs:</p>
<ul>
<li>
<a href="https://ma-riviere.github.io/argent/articles/openai-completions.html">Chat Completions API</a> - Standard OpenAI chat interface</li>
<li>
<a href="https://ma-riviere.github.io/argent/articles/openai-responses.html">Responses API</a> - Newest API combining the functionalities of the Chat and Assistants</li>
<li>
<a href="https://ma-riviere.github.io/argent/articles/openai-assistants.html">Assistants API</a> - Deprecated</li>
</ul>
</div>
<div class="section level4">
<h4 id="other-providers">Other Providers<a class="anchor" aria-label="anchor" href="#other-providers"></a>
</h4>
<ul>
<li>
<a href="https://ma-riviere.github.io/argent/articles/other-providers.html">Using Other Compatible APIs</a> - Use argent with providers offering compatible APIs (e.g., Minimax, Qwen, …)</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="advanced-topics">Advanced Topics<a class="anchor" aria-label="anchor" href="#advanced-topics"></a>
</h3>
<ul>
<li>
<a href="https://ma-riviere.github.io/argent/articles/advanced-rag.html">RAG</a> - How to use <code>argent</code> &amp; <code>ragnar</code> for RAG</li>
<li>
<a href="https://ma-riviere.github.io/argent/articles/advanced-mcp.html">MCP Servers &amp; Tools</a> - How to use MCP server tools with <code>argent</code>
</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>You should probably contribute to <a href="https://github.com/tidyverse/ellmer/" class="external-link">ellmer</a> instead.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT License</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ma-riviere/argent/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing argent</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://ma-riviere.com" class="external-link">Marc-Aurèle Rivière</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5108-3382" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#questioning" class="external-link"><img src="https://img.shields.io/badge/lifecycle-questioning-blue.svg" alt="Lifecycle: questioning"></a></li>
<li><a href="https://github.com/ma-riviere/argent/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ma-riviere/argent/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ma-riviere.com" class="external-link">Marc-Aurèle Rivière</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
