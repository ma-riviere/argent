% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/openai_chat.R
\name{OpenAI_Chat}
\alias{OpenAI_Chat}
\title{OpenAI Chat Completions API Client}
\description{
R6 class for interacting with OpenAI's Chat Completions API (v1/chat/completions).
Provides methods for stateless or stateful chat interactions with conversation history,
tool calling, multimodal inputs, and structured outputs.

This class inherits file management and vector store functionality from OpenAI,
allowing files uploaded here to be used across different OpenAI APIs (Responses, Assistants).
}
\section{Useful links}{

\itemize{
\item API reference: https://platform.openai.com/docs/api-reference/chat
\item API docs: https://platform.openai.com/docs/guides/completions/introduction
}
}

\section{Server-side tools}{

\itemize{
\item "web_search" for web search grounding via OpenAI's web plugin
}
}

\examples{
\dontrun{
# Initialize with API key from environment
openai <- OpenAI_Chat$new()

# Or provide API key explicitly
openai <- OpenAI_Chat$new(api_key = "your-api-key")

# Simple chat completion
response <- openai$chat(
  prompt = "What is R programming?",
  model = "gpt-5-chat-latest"
)

# With tools/function calling
response <- openai$chat(
  prompt = "What's the weather in Paris?",
  tools = list(get_weather_tool)
)

# Upload file and use in chat
file <- openai$upload_file("document.pdf", purpose = "user_data")
response <- openai$chat(
  prompt = openai$multimodal_input(
    "Summarize this document:",
    as_file_ref(file$id)
  )
)
}
}
\section{Super classes}{
\code{argent::Provider} -> \code{argent::OpenAI} -> \code{OpenAI_Chat}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{provider_name}}{Character. Provider name (OpenAI Chat)}

\item{\code{server_tools}}{Character vector. Server-side tools to use for API requests}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-OpenAI_Chat-new}{\code{OpenAI_Chat$new()}}
\item \href{#method-OpenAI_Chat-chat}{\code{OpenAI_Chat$chat()}}
\item \href{#method-OpenAI_Chat-clone}{\code{OpenAI_Chat$clone()}}
}
}
\if{html}{\out{
<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="download_generated_files"><a href='../../argent/html/Provider.html#method-Provider-download_generated_files'><code>argent::Provider$download_generated_files()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="dump_history"><a href='../../argent/html/Provider.html#method-Provider-dump_history'><code>argent::Provider$dump_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_auto_save_history"><a href='../../argent/html/Provider.html#method-Provider-get_auto_save_history'><code>argent::Provider$get_auto_save_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_chat_history"><a href='../../argent/html/Provider.html#method-Provider-get_chat_history'><code>argent::Provider$get_chat_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_content_text"><a href='../../argent/html/Provider.html#method-Provider-get_content_text'><code>argent::Provider$get_content_text()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_generated_code"><a href='../../argent/html/Provider.html#method-Provider-get_generated_code'><code>argent::Provider$get_generated_code()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_generated_files"><a href='../../argent/html/Provider.html#method-Provider-get_generated_files'><code>argent::Provider$get_generated_files()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_history"><a href='../../argent/html/Provider.html#method-Provider-get_history'><code>argent::Provider$get_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_history_file_path"><a href='../../argent/html/Provider.html#method-Provider-get_history_file_path'><code>argent::Provider$get_history_file_path()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_last_response"><a href='../../argent/html/Provider.html#method-Provider-get_last_response'><code>argent::Provider$get_last_response()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_rate_limit"><a href='../../argent/html/Provider.html#method-Provider-get_rate_limit'><code>argent::Provider$get_rate_limit()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_reasoning_text"><a href='../../argent/html/Provider.html#method-Provider-get_reasoning_text'><code>argent::Provider$get_reasoning_text()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_session_cumulative_token_count"><a href='../../argent/html/Provider.html#method-Provider-get_session_cumulative_token_count'><code>argent::Provider$get_session_cumulative_token_count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_session_history"><a href='../../argent/html/Provider.html#method-Provider-get_session_history'><code>argent::Provider$get_session_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_session_last_token_count"><a href='../../argent/html/Provider.html#method-Provider-get_session_last_token_count'><code>argent::Provider$get_session_last_token_count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="get_supplementary"><a href='../../argent/html/Provider.html#method-Provider-get_supplementary'><code>argent::Provider$get_supplementary()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="load_history"><a href='../../argent/html/Provider.html#method-Provider-load_history'><code>argent::Provider$load_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="print"><a href='../../argent/html/Provider.html#method-Provider-print'><code>argent::Provider$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="reset_history"><a href='../../argent/html/Provider.html#method-Provider-reset_history'><code>argent::Provider$reset_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="set_auto_save_history"><a href='../../argent/html/Provider.html#method-Provider-set_auto_save_history'><code>argent::Provider$set_auto_save_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="set_history"><a href='../../argent/html/Provider.html#method-Provider-set_history'><code>argent::Provider$set_history()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="Provider" data-id="set_rate_limit"><a href='../../argent/html/Provider.html#method-Provider-set_rate_limit'><code>argent::Provider$set_rate_limit()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="add_file_to_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-add_file_to_store'><code>argent::OpenAI$add_file_to_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="create_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-create_store'><code>argent::OpenAI$create_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_all_files"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_all_files'><code>argent::OpenAI$delete_all_files()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_all_files_from_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_all_files_from_store'><code>argent::OpenAI$delete_all_files_from_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_all_stores"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_all_stores'><code>argent::OpenAI$delete_all_stores()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_file"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_file'><code>argent::OpenAI$delete_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_file_from_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_file_from_store'><code>argent::OpenAI$delete_file_from_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_files"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_files'><code>argent::OpenAI$delete_files()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_files_from_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_files_from_store'><code>argent::OpenAI$delete_files_from_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_store'><code>argent::OpenAI$delete_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_store_and_files"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_store_and_files'><code>argent::OpenAI$delete_store_and_files()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="delete_stores"><a href='../../argent/html/OpenAI.html#method-OpenAI-delete_stores'><code>argent::OpenAI$delete_stores()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="download_file"><a href='../../argent/html/OpenAI.html#method-OpenAI-download_file'><code>argent::OpenAI$download_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="embeddings"><a href='../../argent/html/OpenAI.html#method-OpenAI-embeddings'><code>argent::OpenAI$embeddings()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="find_assistants"><a href='../../argent/html/OpenAI.html#method-OpenAI-find_assistants'><code>argent::OpenAI$find_assistants()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="find_file"><a href='../../argent/html/OpenAI.html#method-OpenAI-find_file'><code>argent::OpenAI$find_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="find_file_in_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-find_file_in_store'><code>argent::OpenAI$find_file_in_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="find_models"><a href='../../argent/html/OpenAI.html#method-OpenAI-find_models'><code>argent::OpenAI$find_models()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="find_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-find_store'><code>argent::OpenAI$find_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="get_file"><a href='../../argent/html/OpenAI.html#method-OpenAI-get_file'><code>argent::OpenAI$get_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="get_file_content"><a href='../../argent/html/OpenAI.html#method-OpenAI-get_file_content'><code>argent::OpenAI$get_file_content()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="get_model_info"><a href='../../argent/html/OpenAI.html#method-OpenAI-get_model_info'><code>argent::OpenAI$get_model_info()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="list_assistants"><a href='../../argent/html/OpenAI.html#method-OpenAI-list_assistants'><code>argent::OpenAI$list_assistants()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="list_files"><a href='../../argent/html/OpenAI.html#method-OpenAI-list_files'><code>argent::OpenAI$list_files()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="list_files_in_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-list_files_in_store'><code>argent::OpenAI$list_files_in_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="list_models"><a href='../../argent/html/OpenAI.html#method-OpenAI-list_models'><code>argent::OpenAI$list_models()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="list_stores"><a href='../../argent/html/OpenAI.html#method-OpenAI-list_stores'><code>argent::OpenAI$list_stores()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="read_file_from_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-read_file_from_store'><code>argent::OpenAI$read_file_from_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="read_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-read_store'><code>argent::OpenAI$read_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="update_store"><a href='../../argent/html/OpenAI.html#method-OpenAI-update_store'><code>argent::OpenAI$update_store()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="upload_file"><a href='../../argent/html/OpenAI.html#method-OpenAI-upload_file'><code>argent::OpenAI$upload_file()</code></a></span></li>
<li><span class="pkg-link" data-pkg="argent" data-topic="OpenAI" data-id="upload_file_from_df"><a href='../../argent/html/OpenAI.html#method-OpenAI-upload_file_from_df'><code>argent::OpenAI$upload_file_from_df()</code></a></span></li>
</ul>
</details>
}}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-OpenAI_Chat-new"></a>}}
\if{latex}{\out{\hypertarget{method-OpenAI_Chat-new}{}}}
\subsection{Method \code{new()}}{
Initialize a new OpenAI Chat client
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{OpenAI_Chat$new(
  api_key = Sys.getenv("OPENAI_API_KEY"),
  org = Sys.getenv("OPENAI_ORG"),
  base_url = "https://api.openai.com",
  rate_limit = 60/60,
  auto_save_history = TRUE
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{api_key}}{Character. API key (default: from OPENAI_API_KEY env var)}

\item{\code{org}}{Character. Organization ID (default: from OPENAI_ORG env var)}

\item{\code{base_url}}{Character. Base URL for API (default: "https://api.openai.com")}

\item{\code{rate_limit}}{Numeric. Rate limit in requests per second (default: 60/60)}

\item{\code{auto_save_history}}{Logical. Enable/disable automatic history sync (default: TRUE)}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-OpenAI_Chat-chat"></a>}}
\if{latex}{\out{\hypertarget{method-OpenAI_Chat-chat}{}}}
\subsection{Method \code{chat()}}{
Send a chat completion request to OpenAI
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{OpenAI_Chat$chat(
  ...,
  system = .default_system_prompt,
  model = "gpt-5-mini",
  temperature = 1,
  max_completion_tokens = 4096,
  top_p = 1,
  frequency_penalty = 0,
  presence_penalty = 0,
  logprobs = FALSE,
  top_logprobs = NULL,
  n = 1,
  logit_bias = NULL,
  tools = NULL,
  tool_choice = "auto",
  output_schema = NULL,
  reasoning_effort = NULL,
  verbosity = "medium",
  store = FALSE,
  return_full_response = FALSE
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{One or more inputs for the prompt. Can be text strings, file paths, URLs, R objects,
or content wrapped with \verb{as_*_content()} functions. R objects (but not plain strings) will
include their names and structure in the context sent to the model.}

\item{\code{system}}{Character. System instructions (optional)}

\item{\code{model}}{Character. Model to use (default: "gpt-5-mini")}

\item{\code{temperature}}{Numeric. Sampling temperature (default: 1)}

\item{\code{max_completion_tokens}}{Integer. Maximum tokens to generate (default: 4096)}

\item{\code{top_p}}{Numeric. Nucleus sampling parameter 0-1 (default: 1). Alternative to temperature.
We recommend altering this or temperature but not both.}

\item{\code{frequency_penalty}}{Numeric. Penalty for token frequency -2.0 to 2.0 (default: 0).
Positive values decrease likelihood of repeating the same line verbatim.}

\item{\code{presence_penalty}}{Numeric. Penalty for token presence -2.0 to 2.0 (default: 0).
Positive values increase likelihood of talking about new topics.}

\item{\code{logprobs}}{Logical. Whether to return log probabilities (default: FALSE)}

\item{\code{top_logprobs}}{Integer. Number of most likely tokens (0-20) to return at each position (default: NULL).
Requires logprobs = TRUE.}

\item{\code{n}}{Integer. Number of chat completion choices to generate (default: 1)}

\item{\code{logit_bias}}{Named list. Modify likelihood of specified tokens by token ID (default: NULL).
Values from -100 to 100.}

\item{\code{tools}}{List. Client-side function definitions for tool calling (optional). For web search with
search-enabled models (gpt-4o-mini-search-preview, gpt-4o-search-preview, gpt-5-search-api),
pass as: \code{list("web_search")} or with options:
\code{list(list(type = "web_search", user_location = list(...), search_context_size = "medium"))}.
Supported web_search options:
\itemize{
\item \code{user_location}: list with \code{type = "approximate"} and \code{approximate} containing \code{country} (ISO 3166-1),
\code{city}, \code{region}, and/or \code{timezone} (IANA)
\item \code{search_context_size}: "low", "medium" (default), or "high"
}

\strong{Note}: Search models do not support standard sampling parameters (temperature, top_p,
frequency_penalty, presence_penalty, n). These are automatically omitted when using search models.}

\item{\code{tool_choice}}{Character or List. Tool choice mode (default: "auto")}

\item{\code{output_schema}}{List. JSON schema for structured output (optional)}

\item{\code{reasoning_effort}}{Character. Reasoning effort level for reasoning models: "low", "medium", or "high"
(optional). Only applicable to reasoning models (o1, o3, o4, gpt-5). Default: NULL (uses model default)}

\item{\code{verbosity}}{Character. Verbosity level for output: "low", "medium", or "high" (default: "medium")}

\item{\code{store}}{Logical. Whether or not to store the output of this chat completion request in OpenAI servers (default: FALSE)}

\item{\code{return_full_response}}{Logical. Return full API response (default: FALSE)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Character (or List if return_full_response = TRUE). OpenAI Chat API's response object.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-OpenAI_Chat-clone"></a>}}
\if{latex}{\out{\hypertarget{method-OpenAI_Chat-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{OpenAI_Chat$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
