<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using MCP Servers with argent â€¢ argent</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="â€image/svg+xmlâ€" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="advanced-mcp_files/libs/quarto-html/popper.min.js"></script><script src="advanced-mcp_files/libs/quarto-html/tippy.umd.min.js"></script><link href="advanced-mcp_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="advanced-mcp_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using MCP Servers with argent">
<meta property="og:image" content="https://ma-riviere.github.io/argent/reference/figures/logo.png">
<meta property="og:image:alt" content="Creating AI Agents in R">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@mariviere1">
<meta name="twitter:site" content="@mariviere1">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">argent</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/argent.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-providers" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Providers</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-providers">
<li><a class="dropdown-item" href="../articles/google-gemini.html">Google Gemini</a></li>
    <li><a class="dropdown-item" href="../articles/anthropic.html">Anthropic</a></li>
    <li><a class="dropdown-item" href="../articles/openrouter.html">OpenRouter</a></li>
    <li><a class="dropdown-item" href="../articles/local-llm.html">Local LLM</a></li>
    <li><a class="dropdown-item" href="../articles/other-providers.html">Other Providers</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>OpenAI</h6></li>
    <li><a class="dropdown-item" href="../articles/openai-responses.html">Responses API</a></li>
    <li><a class="dropdown-item" href="../articles/openai-completions.html">Chat Completions API</a></li>
    <li><a class="dropdown-item" href="../articles/openai-assistants.html">Assistants API</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-advanced-use" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Advanced Use</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-advanced-use">
<li><a class="dropdown-item" href="../articles/advanced-rag.html">RAG with `ragnar`</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-mcp.html">Using MCP Servers</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-argentic-workflow.html">Advanced Argentic Workflow</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ma-riviere/argent/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using MCP Servers with <code>argent</code>
</h1>




      <small class="dont-index">Source: <a href="https://github.com/ma-riviere/argent/blob/main/vignettes/articles/advanced-mcp.qmd" class="external-link"><code>vignettes/articles/advanced-mcp.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level2"><h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The Model Context Protocol (MCP) enables LLMs to securely interact with external tools and data sources. This vignette demonstrates how to integrate MCP servers with argent to extend your AI agentâ€™s capabilities.</p>
<p>MCP (Model Context Protocol) is an open protocol that standardizes how applications provide context to LLMs. MCP servers expose three main primitives:</p>
<ul>
<li>
<strong>Tools</strong>: Executable functions the LLM can call</li>
<li>
<strong>Resources</strong>: File-like structured data the LLM can access (not supported yet)</li>
<li>
<strong>Prompts</strong>: Predefined templates for interactions (not supported yet)</li>
</ul>
<p>There are two main types of MCP servers: <em>HTTP</em> and <em>stdio</em>. HTTP servers are typically used for cloud-based services like GitHub, while stdio servers are typically used for local services like Docker or npx. Both types of MCP servers can be used with <code>argent</code>.</p>
</section><section class="section level2"><h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ma-riviere.github.io/argent">argent</a></span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<section class="level2"><h3 id="using-an-http-mcp-server">Using an â€˜HTTPâ€™ MCP Server<a class="anchor" aria-label="anchor" href="#using-an-http-mcp-server"></a>
</h3>
<p>Letâ€™s look at the GitHub MCP server as an example. It is a HTTP server that can be used to interact with the GitHub API.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">github_mcp_client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcp_integration.html">mcp_connect</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"github"</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"http"</span>,</span>
<span>    url <span class="op">=</span> <span class="st">"https://api.githubcopilot.com/mcp"</span>,</span>
<span>    headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        Authorization <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Bearer"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GITHUB_PAT"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p>Then, we can get the tools we want from the GitHub MCP server:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">github_mcp_tools</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcp_integration.html">mcp_tools</a></span><span class="op">(</span><span class="va">github_mcp_client</span>, tools <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"get_file_contents"</span>, <span class="st">"search_code"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<p>Finally, we can call the <code>get_file_contents</code> tool manually to see if it works:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_file_contents_mcp_tool</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mcp_tool.html">get_mcp_tool</a></span><span class="op">(</span><span class="va">github_mcp_tools</span>, <span class="st">"get_file_contents"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/execute_mcp_tool.html">execute_mcp_tool</a></span><span class="op">(</span></span>
<span>    tool_def <span class="op">=</span> <span class="va">get_file_contents_mcp_tool</span>,</span>
<span>    arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        owner <span class="op">=</span> <span class="st">"ma-riviere"</span>,</span>
<span>        repo <span class="op">=</span> <span class="st">"argent"</span>,</span>
<span>        path <span class="op">=</span> <span class="st">"R/aaa-utils.R"</span>,</span>
<span>        ref <span class="op">=</span> <span class="st">"main"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h3 id="using-a-stdio-mcp-server">Using a â€˜stdioâ€™ MCP Server<a class="anchor" aria-label="anchor" href="#using-a-stdio-mcp-server"></a>
</h3>
<p>Letâ€™s look at the BTW MCP server as an example (which requires the <a href="https://github.com/posit-dev/btw" class="external-link"><code>btw</code></a> package to be installed). It is a stdio server that can be used to interact with the <code>btw</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">btw_mcp_client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcp_integration.html">mcp_connect</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"btw"</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"stdio"</span>,</span>
<span>    command <span class="op">=</span> <span class="st">"Rscript"</span>,</span>
<span>    args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"-e"</span>,</span>
<span>        <span class="st">"btw::btw_mcp_server(tools = btw::btw_tools(c('docs', 'env', 'ide', 'search', 'session')))"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p>Then, we can get the tools we want from the <code>btw</code> MCP server:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">btw_mcp_tools</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcp_integration.html">mcp_tools</a></span><span class="op">(</span></span>
<span>    <span class="va">btw_mcp_client</span>,</span>
<span>    tools <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"btw_tool_session_check_package_installed"</span>,</span>
<span>        <span class="st">"btw_tool_docs_available_vignettes"</span>,</span>
<span>        <span class="st">"btw_tool_docs_package_help_topics"</span>,</span>
<span>        <span class="st">"btw_tool_docs_help_page"</span>,</span>
<span>        <span class="st">"btw_tool_docs_vignette"</span>,</span>
<span>        <span class="st">"btw_tool_session_package_info"</span>,</span>
<span>        <span class="st">"btw_tool_docs_package_help_topics"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p>Finally, we can call the <code>help_topics</code> tool manually to see if it works:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">help_topics_tool</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mcp_tool.html">get_mcp_tool</a></span><span class="op">(</span><span class="va">btw_mcp_tools</span>, <span class="st">"btw_tool_docs_package_help_topics"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/execute_mcp_tool.html">execute_mcp_tool</a></span><span class="op">(</span></span>
<span>    tool_def <span class="op">=</span> <span class="va">help_topics_tool</span>,</span>
<span>    arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        package_name <span class="op">=</span> <span class="st">"argent"</span>,</span>
<span>        `_intent` <span class="op">=</span> <span class="st">"Vignettes explaining how to use MCP servers with argent"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</section></section><section class="section level2"><h2 id="argent-mcp-servers">Argent + MCP Servers<a class="anchor" aria-label="anchor" href="#argent-mcp-servers"></a>
</h2>
<p>Letâ€™s use the GitHub MCP server and the BTW MCP server to ask a complex question about the <code>mcptools</code> and <code>ellmer</code> packages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">google</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Google.html">Google</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tools</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flat_list.html">flat_list</a></span><span class="op">(</span><span class="va">github_mcp_tools</span>, <span class="va">btw_mcp_tools</span>, <span class="fu"><a href="../reference/tool_definitions.html">as_tool</a></span><span class="op">(</span><span class="va">web_search</span><span class="op">)</span>, <span class="fu"><a href="../reference/tool_definitions.html">as_tool</a></span><span class="op">(</span><span class="va">web_fetch</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">google</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span></span>
<span>    <span class="st">"Has 'posit-dev/mcptools' implemented the ability to use HTTP MCP servers with 'ellmer' ?"</span>,</span>
<span>    <span class="st">"Use the `get_file_contents` tool to list the contents of GitHub subdirectories, e.g. with path = '/' or 'dir/'."</span>,</span>
<span>    <span class="st">"Use the `btw` tools to explore the help pages and vignettes of the local installation of the `mcptools` package."</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"gemini-2.5-flash"</span>,</span>
<span>    tools <span class="op">=</span> <span class="va">tools</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">google</span>, show_tools <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>`posit-dev/mcptools` does not directly implement the ability to use HTTP MCP servers with `ellmer`. When `mcptools` acts as an MCP *client* via `ellmer`, it only supports the local (stdio) protocol. To connect to remote (HTTP) MCP servers, the `mcptools` documentation recommends using `mcp-remote`, an external tool (a local stdio MCP server) that converts remote HTTP servers to `mcptools`-compatible local ones. This allows `ellmer` (using the stdio protocol) to interact with remote HTTP MCP servers through `mcp-remote`.</span></code></pre></div>
<details><summary><code>print(google, show_tools = TRUE)</code></summary><div class="sourceCode" id="cb10"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>â”€â”€ [ &lt;Google&gt; turns: 10 | Current context: 62853 | Cumulated tokens: 196436 ] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>â”€â”€ user [1789 / 2107] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>Has 'posit-dev/mcptools' implemented the ability to use HTTP MCP servers with ellmer ? Use the `get_file_contents` tool to list the contents of GitHub subdirectories, e.g. with path = '/' or 'dir/'. Use the `btw` tools to explore the help pages and vignettes of the local installation of the `mcptools` package.</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>â”€â”€ System â”€â”€</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>You are a helpful AI assistant. Use your knowledge, the files you have access to, and the tools at your disposal to answer the user's query. You can use your tools multiple times, but use them sparingly. Make parallel tool calls if relevant to the user's query. Answer the user's query as soon as you have the information necessary to answer. Self-reflect and double-check your answer before responding. If you don't know the answer even after using your tools, say 'I don't know'. If you do not have all the information necessary to use a provided tool, use NA for required arguments. Today's date is 2025-11-19</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>â”€â”€ Tool Definitions â”€â”€</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>â€¢ get_file_contents(owner, path, ref, repo, sha): Get the contents of a file or directory from a GitHub repository</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>â€¢ search_code(order, page, perPage, query, sort): Fast and precise code search across ALL GitHub repositories using GitHub's native search engine. Best for finding exact symbols, functions, classes, or specific</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  code patterns.</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_docs_package_help_topics(package_name, _intent): Get available help topics for an R package.</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_docs_help_page(package_name, topic, _intent): Get help page from package.</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_docs_available_vignettes(package_name, _intent): List available vignettes for an R package. Vignettes are articles describing key concepts or features of an R package. Returns the listing as a JSON</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  array of `vignette` and `title`. To read a vignette, use `btw_tool_docs_vignette(package_name, vignette)`.</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_docs_vignette(package_name, vignette, _intent): Get a package vignette in plain text.</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_session_check_package_installed(package_name, _intent): Check if a package is installed in the current session.</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_session_package_info(packages, dependencies, _intent): Verify that a specific package is installed, or find out which packages are in use in the current session. As a last resort, this function can</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  also list all installed packages.</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>â€¢ web_search(query): Search the web for information using Tavily API. Returns a JSON array of search results with titles, URLs, and content snippets. Use this when you need current information, facts, news, or</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  any data not in your training data.</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>â€¢ web_fetch(url): Fetch and extract the main text content from a web page as clean markdown. Returns the page content with formatting preserved, stripped of navigation, ads, and boilerplate. Use this to read</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  articles, documentation, blog posts, or any web page content.</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>â”€â”€ assistant [2107 / 2107] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>â”€â”€ Tool Calls â”€â”€</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>â€¢ get_file_contents(repo = "mcptools", owner = "posit-dev", path = "/")</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>â”€â”€ tool [8379 / 10686] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>â€¢ Result from get_file_contents:</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>name: get_file_contents</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>arguments:</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>  repo: mcptools</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>  owner: posit-dev</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>  path: /</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>result:</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>  content:</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>  - type: text</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    text: '[{"type":"file","size":210,"name":".Rbuildignore","path":".Rbuildignore","sha":"8fe0bfc60f1d4655aff00d34de75b22f1e6bb7c3","url":"https://api.github.com/repos/posit-dev/mcptools/contents/.Rbuildignore?ref=4f91a58684555e66fd46414f2dc63c46c3802d89","git_url":"https://api.github.com/repos/posit-dev/mcptools/git/blobs/8fe0bfc60f1d4655aff00d34de75b22f1e6bb7c3","html_url":"https://github.com/posit-dev/mcptools/blob/4f91a58684555e66fd46414f2dc63c46c3802d89/.Rbuildignore","download_url":"https://raw.githubusercontent.com/posit-dev/mcptools/4f91a58684555e66fd46414f2dc63c46c3802d89/.Rbuildignore"},{"type":"dir","size":0,"name":".github","path":".github","sha":"c1a387a5ec7f8bf8c6626c7d04d8d00551252def","url":"https://api.github.com/repos/posit-dev/mcptools/contents/.github?ref=4f91a58684555e66fd46414f2dc63c46c3802d89","git_url":"https://api.github.com/repos/posit-dev/mcpto...</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>â”€â”€ assistant [8579 / 10686] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>â”€â”€ Tool Calls â”€â”€</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>â€¢ search_code(query = "ellmer repo:posit-dev/mcptools")</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>â€¢ search_code(query = "http mcp server repo:posit-dev/mcptools")</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>â”€â”€ tool [60874 / 72190] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>â€¢ Result from search_code:</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>name: search_code</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>arguments:</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>  query: ellmer repo:posit-dev/mcptools</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>result:</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>  content:</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>  - type: text</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>    text: '{"total_count":17,"incomplete_results":false,"items":[{"name":"example-ellmer-tools.R","path":"inst/example-ellmer-tools.R","sha":"bfde4b0d734301e24a4908ec1054a5e0c7997b4c","html_url":"https://github.com/posit-dev/mcptools/blob/4f91a58684555e66fd46414f2dc63c46c3802d89/inst/example-ellmer-tools.R","repository":{"id":955571244,"node_id":"R_kgDOOPTcLA","owner":{"login":"posit-dev","id":107264312,"node_id":"O_kgDOBmS5OA","avatar_url":"https://avatars.githubusercontent.com/u/107264312?v=4","html_url":"https://github.com/posit-dev","gravatar_id":"","type":"Organization","site_admin":false,"url":"https://api.github.com/users/posit-dev","events_url":"https://api.github.com/users/posit-dev/events{/privacy}","following_url":"https://api.github.com/users/posit-dev/following{/other_user}","followers_url":"https://api.github.com/users/posit-dev/followers","gists_url":"https://api.githu...</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>â€¢ Result from search_code:</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>name: search_code</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>arguments:</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>  query: http mcp server repo:posit-dev/mcptools</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a>result:</span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>  content:</span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>  - type: text</span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>    text: '{"total_count":16,"incomplete_results":false,"items":[{"name":"server.R","path":"R/server.R","sha":"c554b70c68889735629019c4b8d14d9a83f05a4b","html_url":"https://github.com/posit-dev/mcptools/blob/4f91a58684555e66fd46414f2dc63c46c3802d89/R/server.R","repository":{"id":955571244,"node_id":"R_kgDOOPTcLA","owner":{"login":"posit-dev","id":107264312,"node_id":"O_kgDOBmS5OA","avatar_url":"https://avatars.githubusercontent.com/u/107264312?v=4","html_url":"https://github.com/posit-dev","gravatar_id":"","type":"Organization","site_admin":false,"url":"https://api.github.com/users/posit-dev","events_url":"https://api.github.com/users/posit-dev/events{/privacy}","following_url":"https://api.github.com/users/posit-dev/following{/other_user}","followers_url":"https://api.github.com/users/posit-dev/followers","gists_url":"https://api.github.com/users/posit-dev/gists{/gist_id}",...</span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a>â”€â”€ assistant [61504 / 72190] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a>â”€â”€ Tool Calls â”€â”€</span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_docs_package_help_topics(package_name = "mcptools", _intent = "Check for relevant help topics in mcptools documentation regarding ellmer and HTTP MCP servers")</span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>â”€â”€ tool [61172 / 133583] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>â€¢ Result from btw_tool_docs_package_help_topics:</span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a>name: btw_tool_docs_package_help_topics</span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>arguments:</span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a>  package_name: mcptools</span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a>  _intent: Check for relevant help topics in mcptools documentation regarding ellmer</span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a>    and HTTP MCP servers</span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>result:</span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a>  content:</span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a>  - type: text</span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a>    text: |-</span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a>      [</span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a>        {"topic_id":"client","title":"R as a client: Define ellmer tools from MCP servers","aliases":["client","mcp_tools","mcp_client"]},</span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a>        {"topic_id":"mcptools-package","title":"mcptools: Model Context Protocol Servers and Clients","aliases":["mcptools","mcptools-package"]},</span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a>        {"topic_id":"server","title":"R as a server: Configure R-based tools with LLM-enabled apps","aliases":["server","mcp_server","mcp_session","server"]}</span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a>  isError: no</span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a>â”€â”€ assistant [61393 / 133583] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a>â”€â”€ Tool Calls â”€â”€</span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a>â€¢ btw_tool_docs_help_page(package_name = "mcptools", topic = "client", _intent = "Get details on how ellmer tools are defined from MCP servers")</span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a>â”€â”€ tool [62486 / 196436] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a>â€¢ Result from btw_tool_docs_help_page:</span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a>name: btw_tool_docs_help_page</span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a>arguments:</span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a>  package_name: mcptools</span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a>  topic: client</span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a>  _intent: Get details on how ellmer tools are defined from MCP servers</span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a>result:</span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a>  content:</span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a>  - type: text</span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a>    text: |-</span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a>      ## `help(package = "mcptools", "client")`</span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a>      ### R as a client: Define ellmer tools from MCP servers</span>
<span id="cb10-128"><a href="#cb10-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-129"><a href="#cb10-129" aria-hidden="true" tabindex="-1"></a>      #### Description</span>
<span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-131"><a href="#cb10-131" aria-hidden="true" tabindex="-1"></a>      These functions implement R as an MCP *client*, so that ellmer chats can</span>
<span id="cb10-132"><a href="#cb10-132" aria-hidden="true" tabindex="-1"></a>      register functionality from third-party MCP servers such as those listed</span>
<span id="cb10-133"><a href="#cb10-133" aria-hidden="true" tabindex="-1"></a>      here: &lt;https://github.com/modelcontextprotocol/servers&gt;.</span>
<span id="cb10-134"><a href="#cb10-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-135"><a href="#cb10-135" aria-hidden="true" tabindex="-1"></a>      `mcp_tools()` fetches tools from MCP servers configured in the mcptools</span>
<span id="cb10-136"><a href="#cb10-136" aria-hidden="true" tabindex="-1"></a>      server config file and converts them to a list of tools compatible with</span>
<span id="cb10-137"><a href="#cb10-137" aria-hidden="true" tabindex="-1"></a>      the `â $set_tools()â ` method of ellmer::Chat objects.</span>
<span id="cb10-138"><a href="#cb10-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-139"><a href="#cb10-139" aria-hidden="true" tabindex="-1"></a>      #### Arguments</span>
<span id="cb10-140"><a href="#cb10-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-141"><a href="#cb10-141" aria-hidden="true" tabindex="-1"></a>      |  |  |</span>
<span id="cb10-142"><a href="#cb10-142" aria-hidden="true" tabindex="-1"></a>      |----|----|</span>
<span id="cb10-143"><a href="#cb10-143" aria-hidden="true" tabindex="-1"></a>      | `config` | A single string indicating the path to the mcptools MCP servers configuration f...</span>
<span id="cb10-144"><a href="#cb10-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-145"><a href="#cb10-145" aria-hidden="true" tabindex="-1"></a>â”€â”€ assistant [62853 / 196436] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span id="cb10-146"><a href="#cb10-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-147"><a href="#cb10-147" aria-hidden="true" tabindex="-1"></a>`posit-dev/mcptools` does not directly implement the ability to use HTTP MCP servers with `ellmer`. When `mcptools` acts as an MCP *client* via `ellmer`, it only supports the local (stdio) protocol. To connect to remote (HTTP) MCP servers, the `mcptools` documentation recommends using `mcp-remote`, an external tool (a local stdio MCP server) that converts remote HTTP servers to `mcptools`-compatible local ones. This allows `ellmer` (using the stdio protocol) to interact with remote HTTP MCP servers through `mcp-remote`.</span></code></pre></div>
</details></section><section class="section level2"><h2 id="advanced-usage">Advanced Usage<a class="anchor" aria-label="anchor" href="#advanced-usage"></a>
</h2>
<section class="level2"><h3 id="creating-a-custom-mcp-server">Creating a Custom MCP Server<a class="anchor" aria-label="anchor" href="#creating-a-custom-mcp-server"></a>
</h3>
<p>Letâ€™s create our own stdio MCP server for interacting with Zoteroâ€™s local API. This server will be usable both from argent and from other MCP clients, like Claude Code.</p>
<section class="level3"><h4 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h4>
<ul>
<li>Zotero 7+ must be running</li>
<li>Enable â€œAllow other applications on this computer to communicate with Zoteroâ€ in Preferences &gt; Advanced</li>
</ul></section><section class="level3"><h4 id="server-implementation">Server Implementation<a class="anchor" aria-label="anchor" href="#server-implementation"></a>
</h4>
<div class="cell">
<details class="code-fold"><summary>Zotero MCP Server Implementation (long)</summary><div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Zotero MCP Server</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># A stdio MCP server for interacting with Zotero's local API.</span></span>
<span><span class="co"># This server can be used with argent or other MCP clients like Claude Code.</span></span>
<span></span>
<span><span class="co"># ------ğŸ”º SETUP ---------------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># Check and install required packages</span></span>
<span><span class="va">required_packages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"httr2"</span>, <span class="st">"cli"</span>, <span class="st">"jsonlite"</span>, <span class="st">"argent"</span><span class="op">)</span></span>
<span><span class="va">missing_packages</span> <span class="op">&lt;-</span> <span class="va">required_packages</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">required_packages</span>, <span class="va">requireNamespace</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">missing_packages</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Installing missing packages: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">missing_packages</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">missing_packages</span>, repos <span class="op">=</span> <span class="st">"https://cloud.r-project.org"</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://httr2.r-lib.org" class="external-link">httr2</a></span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cli.r-lib.org" class="external-link">cli</a></span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite" class="external-link">jsonlite</a></span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ma-riviere.github.io/argent">argent</a></span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Disable httr2 progress bars to avoid stderr noise</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>httr2_progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ------ğŸ”º TOOLS ---------------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># Base request function to Zotero local API</span></span>
<span><span class="va">zotero_request</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">endpoint</span>, <span class="va">query</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">user_id</span> <span class="op">=</span> <span class="st">"0"</span>, <span class="va">valid_statuses</span> <span class="op">=</span> <span class="fl">200</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">base_url</span> <span class="op">&lt;-</span> <span class="st">"http://localhost:23119/api"</span></span>
<span>    <span class="va">url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"/users/"</span>, <span class="va">user_id</span>, <span class="va">endpoint</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">resp</span> <span class="op">&lt;-</span> <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/request.html" class="external-link">request</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/req_headers.html" class="external-link">req_headers</a></span><span class="op">(</span><span class="st">"Zotero-API-Version"</span> <span class="op">=</span> <span class="st">"3"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/req_url.html" class="external-link">req_url_query</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">query</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/req_error.html" class="external-link">req_error</a></span><span class="op">(</span>is_error <span class="op">=</span> \<span class="op">(</span><span class="va">resp</span><span class="op">)</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/req_perform.html" class="external-link">req_perform</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">status</span> <span class="op">&lt;-</span> <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_status.html" class="external-link">resp_status</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">status</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">valid_statuses</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">status</span> <span class="op">==</span> <span class="fl">501</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli_abort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>                <span class="st">"Zotero local API request failed (501 Not Implemented)"</span>,</span>
<span>                <span class="st">"x"</span> <span class="op">=</span> <span class="st">"API version mismatch or local API not enabled"</span>,</span>
<span>                <span class="st">"i"</span> <span class="op">=</span> <span class="st">"Check Preferences &gt; Advanced &gt; 'Allow other applications on this computer to communicate with Zotero'"</span></span>
<span>            <span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>        <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli_abort</a></span><span class="op">(</span><span class="st">"Zotero API request failed with status {status}"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">status</span> <span class="op">==</span> <span class="fl">404</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_body_raw.html" class="external-link">resp_body_json</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_search_items</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">query</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">qmode</span> <span class="op">=</span> <span class="st">"titleCreatorYear"</span>, <span class="va">tag</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">item_type</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">limit</span> <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        q <span class="op">=</span> <span class="va">query</span>,</span>
<span>        qmode <span class="op">=</span> <span class="va">qmode</span>,</span>
<span>        tag <span class="op">=</span> <span class="va">tag</span>,</span>
<span>        itemType <span class="op">=</span> <span class="va">item_type</span>,</span>
<span>        limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">limit</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">params</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html" class="external-link">compact</a></span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">items</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="st">"/items"</span>, query <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">items</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No items found matching the search criteria."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">items</span>, <span class="kw">function</span><span class="op">(</span><span class="va">item</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">item</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span>        <span class="va">creators</span> <span class="op">&lt;-</span> <span class="st">"No authors"</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">names_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span>, \<span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">c</span><span class="op">$</span><span class="va">firstName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span>, <span class="va">c</span><span class="op">$</span><span class="va">lastName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="va">creators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">names_list</span>, collapse <span class="op">=</span> <span class="st">"; "</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>            title <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"Untitled"</span>,</span>
<span>            creators <span class="op">=</span> <span class="va">creators</span>,</span>
<span>            year <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"No date"</span>,</span>
<span>            type <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">itemType</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_get_item</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">item_key</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">item</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/items/"</span>, <span class="va">item_key</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">item</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span>    <span class="va">tags</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">tags</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">tags</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">tags</span>, \<span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="va">t</span><span class="op">$</span><span class="va">tag</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>        title <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"Untitled"</span>,</span>
<span>        creators <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">creators</span>,</span>
<span>        abstract <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">abstractNote</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"No abstract"</span>,</span>
<span>        date <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"No date"</span>,</span>
<span>        itemType <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">itemType</span>,</span>
<span>        tags <span class="op">=</span> <span class="va">tags</span>,</span>
<span>        url <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">url</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_get_collections</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">collections</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="st">"/collections"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">collections</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No collections found."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">collections</span>, <span class="kw">function</span><span class="op">(</span><span class="va">col</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">col</span><span class="op">$</span><span class="va">data</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>            name <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">name</span>,</span>
<span>            parentCollection <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">parentCollection</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="cn">NA</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_get_fulltext</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">item_key</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="va">item</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/items/"</span>, <span class="va">item_key</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>        <span class="va">attachment_key</span> <span class="op">&lt;-</span> <span class="va">item_key</span></span>
<span>        <span class="va">link_mode</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">item</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">itemType</span> <span class="op">!=</span> <span class="st">"attachment"</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">children</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/items/"</span>, <span class="va">item_key</span>, <span class="st">"/children"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>            <span class="va">pdf_attachments</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html" class="external-link">keep</a></span><span class="op">(</span></span>
<span>                <span class="va">children</span>,</span>
<span>                <span class="kw">function</span><span class="op">(</span><span class="va">child</span><span class="op">)</span> <span class="op">{</span></span>
<span>                    <span class="va">child</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">itemType</span> <span class="op">==</span> <span class="st">"attachment"</span> <span class="op">&amp;&amp;</span></span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"pdf"</span>, <span class="va">child</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">contentType</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>                <span class="op">}</span></span>
<span>            <span class="op">)</span></span>
<span></span>
<span>            <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">pdf_attachments</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>                <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No PDF attachments found for this item."</span><span class="op">)</span></span>
<span>            <span class="op">}</span></span>
<span></span>
<span>            <span class="va">attachment_key</span> <span class="op">&lt;-</span> <span class="va">pdf_attachments</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">key</span></span>
<span>            <span class="va">link_mode</span> <span class="op">&lt;-</span> <span class="va">pdf_attachments</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">linkMode</span></span>
<span>        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>            <span class="va">link_mode</span> <span class="op">&lt;-</span> <span class="va">item</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">linkMode</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="va">fulltext</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/items/"</span>, <span class="va">attachment_key</span>, <span class="st">"/fulltext"</span><span class="op">)</span>,</span>
<span>            valid_statuses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">404</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">fulltext</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">linked_msg</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">link_mode</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">link_mode</span> <span class="op">==</span> <span class="st">"linked_file"</span><span class="op">)</span> <span class="op">{</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>                    <span class="st">"\n"</span>,</span>
<span>                    <span class="st">"Note: This is a linked file. Zotero stores fulltext cache in a separate "</span>,</span>
<span>                    <span class="st">"storage directory, not alongside the original PDF."</span></span>
<span>                <span class="op">)</span></span>
<span>            <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>                <span class="st">""</span></span>
<span>            <span class="op">}</span></span>
<span></span>
<span>            <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>                <span class="st">"PDF attachment exists but fulltext has not been indexed yet.\n"</span>,</span>
<span>                <span class="st">"\n"</span>,</span>
<span>                <span class="st">"Indexing happens automatically:\n"</span>,</span>
<span>                <span class="st">"- After 30+ seconds of computer idle time (background processor)\n"</span>,</span>
<span>                <span class="st">"- Or manually: Right-click attachment in Zotero &gt; Reindex Item\n"</span>,</span>
<span>                <span class="st">"\n"</span>,</span>
<span>                <span class="st">"Once indexed, fulltext will be cached and available via this endpoint."</span>,</span>
<span>                <span class="va">linked_msg</span></span>
<span>            <span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">fulltext</span><span class="op">$</span><span class="va">content</span><span class="op">)</span> <span class="op">||</span> <span class="va">fulltext</span><span class="op">$</span><span class="va">content</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"Full-text cache exists but is empty. The PDF may be image-based without searchable text."</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">fulltext</span><span class="op">$</span><span class="va">content</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Full-text extraction failed with error:"</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">conditionMessage</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span>,</span>
<span>            <span class="st">"\nPossible reasons:"</span>,</span>
<span>            <span class="st">"- Item key not found"</span>,</span>
<span>            <span class="st">"- PDF is image-based without searchable text"</span>,</span>
<span>            <span class="st">"- File is corrupted or inaccessible"</span>,</span>
<span>            sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_list_fulltext_items</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">since</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="st">"/fulltext"</span>, query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>since <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">since</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No items with fulltext found."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">items</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">key</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">key</span>, version <span class="op">=</span> <span class="va">result</span><span class="op">[[</span><span class="va">key</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">items</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_get_collection_items</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">collection_key</span>, <span class="va">limit</span> <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">endpoint</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/collections/"</span>, <span class="va">collection_key</span>, <span class="st">"/items"</span><span class="op">)</span></span>
<span>    <span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">limit</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">items</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="va">endpoint</span>, query <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">items</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No items found in this collection."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">items</span>, <span class="kw">function</span><span class="op">(</span><span class="va">item</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">item</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span>        <span class="va">creators</span> <span class="op">&lt;-</span> <span class="st">"No authors"</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">names_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span>, \<span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">c</span><span class="op">$</span><span class="va">firstName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span>, <span class="va">c</span><span class="op">$</span><span class="va">lastName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="va">creators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">names_list</span>, collapse <span class="op">=</span> <span class="st">"; "</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>            title <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"Untitled"</span>,</span>
<span>            creators <span class="op">=</span> <span class="va">creators</span>,</span>
<span>            year <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"No date"</span>,</span>
<span>            type <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">itemType</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_get_top_items</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">limit</span> <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">limit</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">items</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="st">"/items/top"</span>, query <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">items</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No top-level items found."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">items</span>, <span class="kw">function</span><span class="op">(</span><span class="va">item</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">item</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span>        <span class="va">creators</span> <span class="op">&lt;-</span> <span class="st">"No authors"</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">names_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span>, \<span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">c</span><span class="op">$</span><span class="va">firstName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span>, <span class="va">c</span><span class="op">$</span><span class="va">lastName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="va">creators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">names_list</span>, collapse <span class="op">=</span> <span class="st">"; "</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>            title <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"Untitled"</span>,</span>
<span>            creators <span class="op">=</span> <span class="va">creators</span>,</span>
<span>            year <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"No date"</span>,</span>
<span>            type <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">itemType</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_list_searches</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">searches</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="st">"/searches"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">searches</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No saved searches found."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">searches</span>, <span class="kw">function</span><span class="op">(</span><span class="va">search</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">search</span><span class="op">$</span><span class="va">data</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>            name <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">name</span>,</span>
<span>            conditions <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">conditions</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_execute_search</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">search_key</span>, <span class="va">limit</span> <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">endpoint</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/searches/"</span>, <span class="va">search_key</span>, <span class="st">"/items"</span><span class="op">)</span></span>
<span>    <span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">limit</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">items</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="va">endpoint</span>, query <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">items</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No items found matching this saved search."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">items</span>, <span class="kw">function</span><span class="op">(</span><span class="va">item</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">item</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span>        <span class="va">creators</span> <span class="op">&lt;-</span> <span class="st">"No authors"</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">names_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span>, \<span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">c</span><span class="op">$</span><span class="va">firstName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span>, <span class="va">c</span><span class="op">$</span><span class="va">lastName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="va">creators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">names_list</span>, collapse <span class="op">=</span> <span class="st">"; "</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>            title <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"Untitled"</span>,</span>
<span>            creators <span class="op">=</span> <span class="va">creators</span>,</span>
<span>            year <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"No date"</span>,</span>
<span>            type <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">itemType</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_get_item_types</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">item_types</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="st">"/itemTypes"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">item_types</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No item types found."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">item_types</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">zotero_get_trashed_items</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">limit</span> <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">limit</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">items</span> <span class="op">&lt;-</span> <span class="fu">zotero_request</span><span class="op">(</span><span class="st">"/items/trash"</span>, query <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">items</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">"No items in trash."</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">items</span>, <span class="kw">function</span><span class="op">(</span><span class="va">item</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">item</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span>        <span class="va">creators</span> <span class="op">&lt;-</span> <span class="st">"No authors"</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_empty.html" class="external-link">is_empty</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">names_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">creators</span>, \<span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">c</span><span class="op">$</span><span class="va">firstName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span>, <span class="va">c</span><span class="op">$</span><span class="va">lastName</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="va">creators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">names_list</span>, collapse <span class="op">=</span> <span class="st">"; "</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            key <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">key</span>,</span>
<span>            title <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"Untitled"</span>,</span>
<span>            creators <span class="op">=</span> <span class="va">creators</span>,</span>
<span>            year <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="st">"No date"</span>,</span>
<span>            type <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">itemType</span>,</span>
<span>            deleted <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">deleted</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="cn">FALSE</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">result</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co"># MCP server function</span></span>
<span><span class="va">zotero_mcp_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">server</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">:::</span><span class="va"><a href="../reference/McpServer.html">McpServer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"Zotero"</span>,</span>
<span>        version <span class="op">=</span> <span class="st">"1.0.0"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Define tool definitions using argent::tool()</span></span>
<span>    <span class="va">search_items_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_search_items"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Search for items in your Zotero library using phrase-based matching."</span>,</span>
<span>            <span class="st">"Returns a list of items with their metadata (title, authors, year, type)."</span>,</span>
<span>            <span class="st">"IMPORTANT SEARCH TIPS:"</span>,</span>
<span>            <span class="st">"- The 'query' parameter performs phrase matching in titles and creator fields"</span>,</span>
<span>            <span class="st">"- Use broad, generic terms first (e.g., 'climate' before 'climate change mitigation')"</span>,</span>
<span>            <span class="st">"- Try synonyms if initial search yields no results"</span>,</span>
<span>            <span class="st">"- Break complex searches into multiple queries with different keywords"</span>,</span>
<span>            <span class="st">"- Use 'qmode=everything' to include full-text content in search"</span>,</span>
<span>            <span class="st">"- Search is case-insensitive but matches must be complete phrases"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"string Quick search query for phrase matching in titles and creator fields."</span>,</span>
<span>            <span class="st">"Searches are case-insensitive phrase matches."</span>,</span>
<span>            <span class="st">"Start with generic terms and narrow down or try synonyms if no results."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        qmode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"string Search mode: 'titleCreatorYear' (default, searches title/creator/year)"</span>,</span>
<span>            <span class="st">"or 'everything' (includes full-text content from indexed PDFs)."</span>,</span>
<span>            <span class="st">"Use 'everything' only when searching PDF content is needed."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"string Filter by exact tag name (case-sensitive)."</span>,</span>
<span>            <span class="st">"Supports Boolean syntax: 'tag1' (single), 'tag1 tag2' (tag with spaces),"</span>,</span>
<span>            <span class="st">"'tag=tag1&amp;tag=tag2' (AND), 'tag1 || tag2' (OR), '-tag1' (NOT)."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        item_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"string Filter by item type."</span>,</span>
<span>            <span class="st">"Common types: 'book', 'journalArticle', 'conferencePaper', 'thesis', 'report',"</span>,</span>
<span>            <span class="st">"'webpage', 'document', 'attachment'."</span>,</span>
<span>            <span class="st">"Supports Boolean: 'book || journalArticle' (OR), '-attachment' (NOT)."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        limit <span class="op">=</span> <span class="st">"integer Maximum number of items to return (1-100, default: 25)"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">get_item_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_get_item"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Get detailed metadata for a specific Zotero item by its key."</span>,</span>
<span>            <span class="st">"Returns comprehensive information including title, creators, abstract, date, type, tags, and URL."</span>,</span>
<span>            <span class="st">"Use this after zotero_search_items to get full details for specific items."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        item_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"string* The unique item key returned from search results."</span>,</span>
<span>            <span class="st">"Example: 'X42A7DEE' (alphanumeric, case-sensitive)."</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">get_collections_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_get_collections"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"List all collections (folders) in your Zotero library."</span>,</span>
<span>            <span class="st">"Collections organize items hierarchically."</span>,</span>
<span>            <span class="st">"Returns collection keys, names, and parent-child relationships."</span>,</span>
<span>            <span class="st">"Use collection keys with other endpoints to filter items by collection."</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">get_fulltext_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_get_fulltext"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Extract full-text content from a Zotero item's attached PDF."</span>,</span>
<span>            <span class="st">"Automatically finds PDF attachments if given a parent item key."</span>,</span>
<span>            <span class="st">"REQUIREMENTS:"</span>,</span>
<span>            <span class="st">"- Item must have an attached PDF file (stored or linked)"</span>,</span>
<span>            <span class="st">"- PDF must be indexed by Zotero (automatic when idle, or manual reindex)"</span>,</span>
<span>            <span class="st">"- PDF must have searchable text (not image-only scans)"</span>,</span>
<span>            <span class="st">"NOTES:"</span>,</span>
<span>            <span class="st">"- Accepts both parent item keys (will find first PDF) or direct attachment keys"</span>,</span>
<span>            <span class="st">"- Returns helpful error messages if PDF is not indexed or not found"</span>,</span>
<span>            <span class="st">"- Warns if only partial content indexed (due to page/character limits)"</span>,</span>
<span>            <span class="st">"Use this to access the actual text content of papers for detailed analysis."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        item_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"string* The item key - can be either:"</span>,</span>
<span>            <span class="st">"(1) Parent item key from search results (will auto-find PDF attachment), or"</span>,</span>
<span>            <span class="st">"(2) Direct attachment key for a specific PDF."</span>,</span>
<span>            <span class="st">"Obtain from zotero_search_items or zotero_get_item results."</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">list_fulltext_items_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_list_fulltext_items"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"List all items in the library that have indexed fulltext content."</span>,</span>
<span>            <span class="st">"Returns item keys and their fulltext version numbers."</span>,</span>
<span>            <span class="st">"Useful for discovering which items have searchable PDF content before retrieving it."</span>,</span>
<span>            <span class="st">"Combine with zotero_get_fulltext to access the actual content."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        since <span class="op">=</span> <span class="st">"integer Library version to filter from (default: 0 for all items)"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">get_collection_items_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_get_collection_items"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Get all items within a specific collection (folder)."</span>,</span>
<span>            <span class="st">"Returns metadata for items including title, authors, year, and type."</span>,</span>
<span>            <span class="st">"Use zotero_get_collections to get collection keys first."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        collection_key <span class="op">=</span> <span class="st">"string* The collection key obtained from zotero_get_collections"</span>,</span>
<span>        limit <span class="op">=</span> <span class="st">"integer Maximum number of items to return (1-100, default: 100)"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">get_top_items_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_get_top_items"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Get only top-level items in the library."</span>,</span>
<span>            <span class="st">"Excludes child items like attachments and notes."</span>,</span>
<span>            <span class="st">"Returns metadata including title, authors, year, and type."</span>,</span>
<span>            <span class="st">"Useful for getting a clean list of main references without clutter."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        limit <span class="op">=</span> <span class="st">"integer Maximum number of items to return (1-100, default: 100)"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">list_searches_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_list_searches"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"List all saved searches in the library."</span>,</span>
<span>            <span class="st">"Saved searches are pre-configured queries that can be executed."</span>,</span>
<span>            <span class="st">"Returns search keys, names, and their conditions."</span>,</span>
<span>            <span class="st">"Use the search key with zotero_execute_search to run the search."</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">execute_search_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_execute_search"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Execute a saved search and return matching items."</span>,</span>
<span>            <span class="st">"Saved searches are pre-configured queries created in Zotero."</span>,</span>
<span>            <span class="st">"Returns item metadata including title, authors, year, and type."</span>,</span>
<span>            <span class="st">"Use zotero_list_searches to discover available saved searches."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        search_key <span class="op">=</span> <span class="st">"string* The search key obtained from zotero_list_searches"</span>,</span>
<span>        limit <span class="op">=</span> <span class="st">"integer Maximum number of items to return (1-100, default: 100)"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">get_item_types_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_get_item_types"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Get a list of all valid item types supported by Zotero."</span>,</span>
<span>            <span class="st">"Item types include: book, journalArticle, conferencePaper, thesis, etc."</span>,</span>
<span>            <span class="st">"Useful for understanding what types can be used with the item_type filter"</span>,</span>
<span>            <span class="st">"in zotero_search_items and other endpoints."</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="va">get_trashed_items_tool</span> <span class="op">&lt;-</span> <span class="fu">argent</span><span class="fu">::</span><span class="fu"><a href="../reference/tool_definitions.html">tool</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"zotero_get_trashed_items"</span>,</span>
<span>        description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="st">"Get items that are in the trash."</span>,</span>
<span>            <span class="st">"Returns metadata including title, authors, year, type, and deletion status."</span>,</span>
<span>            <span class="st">"Useful for recovering or reviewing deleted items."</span></span>
<span>        <span class="op">)</span>,</span>
<span>        limit <span class="op">=</span> <span class="st">"integer Maximum number of items to return (1-100, default: 100)"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Add tools to server</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">search_items_tool</span>, handler <span class="op">=</span> <span class="va">zotero_search_items</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">get_item_tool</span>, handler <span class="op">=</span> <span class="va">zotero_get_item</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">get_collections_tool</span>, handler <span class="op">=</span> <span class="va">zotero_get_collections</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">get_fulltext_tool</span>, handler <span class="op">=</span> <span class="va">zotero_get_fulltext</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">list_fulltext_items_tool</span>, handler <span class="op">=</span> <span class="va">zotero_list_fulltext_items</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">get_collection_items_tool</span>, handler <span class="op">=</span> <span class="va">zotero_get_collection_items</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">get_top_items_tool</span>, handler <span class="op">=</span> <span class="va">zotero_get_top_items</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">list_searches_tool</span>, handler <span class="op">=</span> <span class="va">zotero_list_searches</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">execute_search_tool</span>, handler <span class="op">=</span> <span class="va">zotero_execute_search</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">get_item_types_tool</span>, handler <span class="op">=</span> <span class="va">zotero_get_item_types</span><span class="op">)</span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">add_tool</span><span class="op">(</span>tool_def <span class="op">=</span> <span class="va">get_trashed_items_tool</span>, handler <span class="op">=</span> <span class="va">zotero_get_trashed_items</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">server</span><span class="op">$</span><span class="fu">serve_stdio</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">zotero_mcp_server</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<div>
<blockquote>
<p><strong>Note</strong></p>
<p>The complete Zotero MCP server code is available in the package at <code>inst/examples/zotero_mcp_server.R</code>.</p>
</blockquote>
</div>
</section></section><section class="level2"><h3 id="using-the-server">Using the Server<a class="anchor" aria-label="anchor" href="#using-the-server"></a>
</h3>
<section class="level3"><h4 id="use-with-argent">Use with argent<a class="anchor" aria-label="anchor" href="#use-with-argent"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zotero_client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcp_integration.html">mcp_connect</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"zotero"</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"stdio"</span>,</span>
<span>    command <span class="op">=</span> <span class="st">"Rscript"</span>,</span>
<span>    args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/zotero_mcp_server.R"</span>, package <span class="op">=</span> <span class="st">"argent"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">zotero_tools</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcp_integration.html">mcp_tools</a></span><span class="op">(</span><span class="va">zotero_client</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zotero_get_collections_tool</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mcp_tool.html">get_mcp_tool</a></span><span class="op">(</span><span class="va">zotero_tools</span>, <span class="st">"zotero_get_collections"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/execute_mcp_tool.html">execute_mcp_tool</a></span><span class="op">(</span><span class="va">zotero_get_collections_tool</span>, arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">openrouter</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/OpenRouter.html">OpenRouter</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">openrouter</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span></span>
<span>    <span class="st">"Can you summarize Noe's view on sensory substitution and how the brain differentiates sensory inputs ?"</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"google/gemini-2.5-flash-lite-preview-09-2025"</span>,</span>
<span>    tools <span class="op">=</span> <span class="va">zotero_tools</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div>
<blockquote>
<p><strong>Tip</strong></p>
<p>We can use our new Zotero MCP server with other MCP clients (like Claude Code, Claude Desktop, Gemini CLI, etc):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"mcpServers"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"zotero"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"stdio"</span><span class="fu">,</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"command"</span><span class="fu">:</span> <span class="st">"Rscript"</span><span class="fu">,</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"args"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"--quiet"</span><span class="ot">,</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"--vanilla"</span><span class="ot">,</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"/path/to/argent/inst/examples/zotero_mcp_server.R"</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</blockquote>
</div>
</section></section></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ma-riviere.com" class="external-link">Marc-AurÃ¨le RiviÃ¨re</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
